{% extends 'AppBundle::base.html.twig' %}
{% set nav ='department' %}

{% block content_title %} 
{{ script(['links/user/js/system-settings.js']) }}
<div class="content-header">  
  <h1>部门管理</h1>
</div>
<hr>
<ul class="nav nav-tabs mbm">
  <a class="btn btn-sm btn-success pull-right bot add-department-modal" data-url="{{path('admin_add_department')}}"><span class="glyphicon glyphicon-plus"></span>&nbsp;添加部门</a>
</ul>
{% endblock %}
{% block content_body %}

<form id="add-user-form" class="form-horizontal">
  <div class="add-user-body">
    <table id="user-table" class="table table-striped table-hover" data-search-form="#user-search-form">
      <thead>
        <tr>
          <th width="35%">部门</th>
          <th width="40%">现有人数</th>
          <th>操作</th>
        </tr>
      </thead>
      <tbody>
      {% for department in departments %}
        <tr>
          <td>{{department.name}}</td>
          <td>{{department.amount}}</td>
          <td>
            <a class="btn btn-sm btn-primary edit-department-modal" data-url="{{ path('admin_edit_department' , {id:department.id}) }}"><span class="glyphicon glyphicon-edit"></span>&nbsp;编辑</a> 
            {% if  department.amount == 0 %}
              <a class="btn btn-sm btn-danger del-department" data-url="{{ path('admin_delete_department', {id:department.id}) }}"><span class="glyphicon glyphicon-trash"></span>&nbsp;删除</a>
            {% endif %}
          </td>
        </tr>  
      {% endfor %}
      </tbody>
    </table>
  </div>
</form>
{% endblock %}